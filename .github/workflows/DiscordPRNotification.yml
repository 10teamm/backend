name: Discord PR ì•Œë¦¼ (ì„¸ë¶„í™”)

on:
  pull_request:
    types: [opened, reopened, synchronize]
    branches:
      - main
      - develo

jobs:
  notify-discord:
    runs-on: ubuntu-latest

    steps:
      - name: Discord ì•Œë¦¼ ì „ì†¡ (PR ìƒì„±)
        if: github.event.action == 'opened'
        uses: tsickert/discord-webhook@v2
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          payload: |
            {
              "username": "ë°±ì—”ë“œ ì•Œë¦¼",
              "embeds": [
                {
                  "title": "ğŸ™Œ ìƒˆë¡œìš´ Pull Requestê°€ ìƒì„±ëì–´ìš”!",
                  "description": "**ë ˆí¬ì§€í† ë¦¬:** `${{ github.repository }}`\n**ë¸Œëœì¹˜:** `${{ github.base_ref }}`\n\n**PR ì œëª©:** `${{ github.event.pull_request.title }}`",
                  "url": "${{ github.event.pull_request.html_url }}",
                  "color": 65280,
                  "author": {
                    "name": "${{ github.event.pull_request.user.login }}",
                    "icon_url": "${{ github.event.pull_request.user.avatar_url }}"
                  },
                  "fields": [
                    {
                      "name": "ì‘ì„±ì",
                      "value": "${{ github.event.pull_request.user.login }}",
                      "inline": true
                    },
                    {
                      "name": "ë¸Œëœì¹˜",
                      "value": "${{ github.head_ref }}",
                      "inline": true
                    },
                    {
                      "name": "ìƒíƒœ",
                      "value": "ìƒˆë¡œìš´ PRì´ ì—´ë ¸ìŠµë‹ˆë‹¤.",
                      "inline": false
                    }
                  ],
                  "timestamp": "${{ github.event.pull_request.created_at }}",
                  "footer": {
                  }
                }
              ]
            }

      - name: Discord ì•Œë¦¼ ì „ì†¡ (PR ë‹¤ì‹œ ì—´ë¦¼)
        if: github.event.action == 'reopened'
        uses: tsickert/discord-webhook@v2
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          payload: |
            {
              "username": "ë°±ì—”ë“œ ì•Œë¦¼",
              "embeds": [
                {
                  "title": "ğŸ”„ Pull Requestê°€ ë‹¤ì‹œ ì—´ë ¸ìŠµë‹ˆë‹¤!",
                  "description": "**ë ˆí¬ì§€í† ë¦¬:** `${{ github.repository }}`\n**ë¸Œëœì¹˜:** `${{ github.base_ref }}`\n\n**PR ì œëª©:** `${{ github.event.pull_request.title }}`",
                  "url": "${{ github.event.pull_request.html_url }}",
                  "color": 16776960,
                  "author": {
                    "name": "${{ github.event.pull_request.user.login }}",
                    "icon_url": "${{ github.event.pull_request.user.avatar_url }}"
                  },
                  "fields": [
                    {
                      "name": "ì‘ì„±ì",
                      "value": "${{ github.event.pull_request.user.login }}",
                      "inline": true
                    },
                    {
                      "name": "ë¸Œëœì¹˜",
                      "value": "${{ github.head_ref }}",
                      "inline": true
                    },
                    {
                      "name": "ìƒíƒœ",
                      "value": "PRì´ ë‹¤ì‹œ ì—´ë ¸ìŠµë‹ˆë‹¤.",
                      "inline": false
                    }
                  ],
                  "timestamp": "${{ github.event.pull_request.updated_at }}",
                  "footer": {
                  }
                }
              ]
            }

      - name: Discord ì•Œë¦¼ ì „ì†¡ (PR ì—…ë°ì´íŠ¸)
        if: github.event.action == 'synchronize'
        uses: tsickert/discord-webhook@v2
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          payload: |
            {
              "username": "ë°±ì—”ë“œ ì•Œë¦¼",
              "embeds": [
                {
                  "title": "âœï¸ Pull Requestì— ìƒˆ ì»¤ë°‹ì´ í‘¸ì‹œë˜ì—ˆìŠµë‹ˆë‹¤!",
                  "description": "**ë ˆí¬ì§€í† ë¦¬:** `${{ github.repository }}`\n**ë¸Œëœì¹˜:** `${{ github.base_ref }}`\n\n**PR ì œëª©:** `${{ github.event.pull_request.title }}`",
                  "url": "${{ github.event.pull_request.html_url }}",
                  "color": 3447003,
                  "author": {
                    "name": "${{ github.event.pull_request.user.login }}",
                    "icon_url": "${{ github.event.pull_request.user.avatar_url }}"
                  },
                  "fields": [
                    {
                      "name": "ì‘ì„±ì",
                      "value": "${{ github.event.pull_request.user.login }}",
                      "inline": true
                    },
                    {
                      "name": "ë¸Œëœì¹˜",
                      "value": "${{ github.head_ref }}",
                      "inline": true
                    },
                    {
                      "name": "ìƒíƒœ",
                      "value": "PRì— ìƒˆë¡œìš´ ë³€ê²½ì‚¬í•­ì´ í‘¸ì‹œë˜ì—ˆìŠµë‹ˆë‹¤.",
                      "inline": false
                    }
                  ],
                  "timestamp": "${{ github.event.pull_request.updated_at }}",
                  "footer": {
                  }
                }
              ]
            }